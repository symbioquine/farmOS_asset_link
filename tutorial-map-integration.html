<!DOCTYPE html>
<html lang="en">

<head>
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Asset Link docs Map Integration</title>

  <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="./build/entry.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,400,700|Inconsolata,700" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link type="text/css" rel="stylesheet" href="https://jmblog.github.io/color-themes-for-google-code-prettify/themes/tomorrow-night.min.css">
  <link type="text/css" rel="stylesheet" href="styles/app.min.css">
  <link type="text/css" rel="stylesheet" href="styles/iframe.css">
  <link type="text/css" rel="stylesheet" href="./custom-styles.css">
  <script async defer src="https://buttons.github.io/buttons.js"></script>

  
</head>



<body class="layout">
    <div id="stickyNavbarOverlay"></div>
    

<div class="top-nav">
    <div class="inner">
        <a id="hamburger" role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
        <div class="logo">
             
                <a class="image" href="index.html">
                    <img src="https://user-images.githubusercontent.com/30754460/184543756-4bbd5d3b-7a87-487b-b2ab-5d7244e728ac.png" alt="logo">
                </a>
            
             
                <a href="index.html">
                    <h1 class="navbar-item">Asset Link</h1>
                </a>
            
        </div>
        <div class="menu">
            
            <div class="navigation">
                <a
                    href="index.html"
                    class="link"
                >
                    Documentation
                </a>
                
                <div class="dropdown is-hoverable is-right">
                    <a class="dropdown-trigger link">
                        Tutorials
                        <i class="fas fa-chevron-down fa-xs"></i>
                    </a>
                    <div class="dropdown-menu">
                        <div class="dropdown-content">
                        
                            <a class="dropdown-item" href="tutorial-user-guide.html">
                                User Guide
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-development.html">
                                Development
                            </a>
                        
                        </div>
                    </div>
                </div>
                
                 
                    
                        <a
                            class="link user-link "
                            href="https://github.com/symbioquine/farmOS_asset_link"
                        >
                            Github
                        </a>
                    
                        <a
                            class="link user-link "
                            href="https://www.npmjs.com/package/assetlink-plugin-api"
                        >
                            Plugin API ðŸ“¦
                        </a>
                    
                        <a
                            class="link user-link "
                            href="https://www.npmjs.com/package/assetlink-plugin-dev-support"
                        >
                            Dev Support ðŸ“¦
                        </a>
                    
                
                
            </div>
        </div>
    </div>
</div>
    <div id="main">
        <div
            class="sidebar tutorials"
            id="sidebarNav"
        >
            
                <div class="search-wrapper">
                    <input id="search" type="text" placeholder="Search docs..." class="input">
                </div>
            
            <nav>
                
                    <div class="category"><h3>Tutorials</h3><ul><li><a href="tutorial-user-guide.html">User Guide</a><ul><li><a href="tutorial-installation-and-upgrades.html">Installation and Upgrades</a></li></ul></li><li><a href="tutorial-development.html">Development</a><ul><li><a href="tutorial-extension-model.html">Extension Model</a></li><li><a href="tutorial-farm-data-access.html">Farm Data Access</a></li><li><a href="tutorial-advanced-farm-data-queries.html">Advanced Farm Data Queries</a></li><li><a href="tutorial-writing-plugins.html">Writing Plugins</a></li><li><a href="tutorial-simple-asset-action-plugin.html">Simple Asset Action</a></li><li><a href="tutorial-map-integration.html">Map Integration</a></li><li><a href="tutorial-plugin-as-farm-os-module.html">Packaging a plugin as a farmOS contrib module</a></li><li><a href="tutorial-custom-styles-in-plugins.html">Custom styles in plugins</a></li></ul></li></ul></div>
                
            </nav>
        </div>
        <div class="core" id="main-content-wrapper">
            <div class="content">
                <header class="page-title">
                    <p>Tutorial</p>
                    <h1>Map Integration</h1>
                </header>
                <section>

<article>
    <p>Maps can be embedded in Asset Link using the <a href="module-FarmMap.html"><code>&lt;farm-map&gt;</code> component</a>. There are some limitations that are described below.</p>
<p>Also check out the <a href="https://github.com/farmOS/farmOS-map/blob/2.x/README.md">farmOS-map readme</a> for more details of working with the underlying library.</p>
<h3 id="quick-example">Quick Example</h3>
<p><strong>TestMap.alink.vue</strong></p>
<pre class="prettyprint source lang-vue"><code>&lt;script setup>
import { createDrupalUrl } from &quot;assetlink-plugin-api&quot;;

const onMapInitialized = (map) => {
  map.addBehavior(&quot;sidePanel&quot;);
  map.addBehavior(&quot;layerSwitcherInSidePanel&quot;);

  const layer = map.addLayer('geojson', {
    title: 'All Assets',
    url: createDrupalUrl('/assets/geojson/full/all')
  });

  layer.getSource().on('change', function () {
    map.zoomToVectors();
  });
};
&lt;/script>

&lt;template alink-route[com.example.farmos_asset_link.routes.v0.test_map]=&quot;/test-map&quot;>
&lt;farm-map @map-initialized=&quot;onMapInitialized&quot;>&lt;/farm-map>
&lt;/template>
</code></pre>
<blockquote>
<p><img src="./test_map.png" alt=""></p>
</blockquote>
<h3 id="limitations">Limitations</h3>
<h4 id="core-farmos-behaviors">Core farmOS behaviors</h4>
<p>Currently there isn't a good way to load the core behaviors that are shipped with farmOS - as opposed to the behaviors that come with farmOS-map or custom behaviors (both of which do work). This is because the behaviors from farmOS itself rely on Drupal's system for managing Javascript dependencies and Drupal's server-side render event system to populate key settings.</p>
<h4 id="offline-first">Offline First</h4>
<p>Asset Link has opted to leverage the version of farmOS-map that is vended with farmOS instead of packaging its own copy. This should reduce the total amount of data users of Asset Link end up loading, but it also means that it is possible for the map library not to be available offline if that functionality hasn't yet been used in Asset Link.</p>
<p>Further, lazily loaded map layers - including base layers like OpenStreetMap - will tend not to work offline. Some caching improvements may be possible, but in general this will always be a weakness since there is an inherent trade-off between what data gets precached when online and the functionality that is available later when offline.</p>
<h4 id="openlayers-api-access">OpenLayers API Access</h4>
<p>farmOS-map is built upon OpenLayers, but chooses to only package the parts of OpenLayers that it uses. This means that applications which need direct access to the OpenLayers API must obtain it directly rather than through farmOS-map. In practice this means only certain kinds of maps can be built via simple <code>.alink.vue</code> Asset Link plugins. More complicated use-cases will require a build step. See <a href="https://www.npmjs.com/package/assetlink-plugin-dev-support">assetlink-plugin-dev-support</a> for more information on making Asset Link plugins that require a build step.</p>
</article>

</section>

            </div>
            
            <footer class="footer">
                <div class="content has-text-centered">
                    <p>Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.11</a></p>
                    <p class="sidebar-created-by">
                        <a href="https://github.com/SoftwareBrothers/better-docs" target="_blank">BetterDocs theme</a> provided with <i class="fas fa-heart"></i> by
                        <a href="http://softwarebrothers.co" target="_blank">SoftwareBrothers - JavaScript Development Agency</a>
                    </p>
                </div>
            </footer>
            
        </div>
        <div id="side-nav" class="side-nav">
        </div>
    </div>
<script src="scripts/app.min.js"></script>
<script>PR.prettyPrint();</script>
<script src="scripts/linenumber.js"> </script>

<script src="scripts/search.js"> </script>


</body>
</html>